# Dark Mode Toggle Implementation Plan

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** Add a dark mode toggle button to the portfolio header with sun/moon icons, localStorage persistence, and system preference detection.

**Architecture:** Use Tailwind's `class` dark mode strategy with a custom `useTheme` hook for state management. Toggle button in header with Framer Motion animation. All components updated with `dark:` variant classes.

**Tech Stack:** React, Tailwind CSS (dark mode), Framer Motion, localStorage API

---

## Task 1: Enable Tailwind Dark Mode

**Files:**
- Modify: `tailwind.config.js`

**Step 1: Add darkMode configuration**

Replace `tailwind.config.js`:
```js
/** @type {import('tailwindcss').Config} */
export default {
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
  ],
  darkMode: 'class',
  theme: {
    extend: {
      colors: {
        primary: '#4070F4',
        secondary: '#0E2431',
      },
      fontFamily: {
        poppins: ['Poppins', 'sans-serif'],
      },
    },
  },
  plugins: [],
}
```

**Step 2: Verify config is valid**

Run:
```bash
npm run dev -- --port 3000 &
sleep 3
curl -s http://localhost:3000 | head -5
pkill -f "vite"
```
Expected: No errors, app loads

**Step 3: Commit**

```bash
git add tailwind.config.js
git commit -m "feat: enable Tailwind dark mode with class strategy"
```

---

## Task 2: Update Base Styles for Dark Mode

**Files:**
- Modify: `src/index.css`

**Step 1: Add dark mode base styles**

Replace the `@layer base` section in `src/index.css`:
```css
@layer base {
  html {
    scroll-behavior: smooth;
  }
  body {
    @apply font-poppins text-secondary bg-white;
    @apply dark:bg-gray-900 dark:text-white;
  }
}
```

**Step 2: Commit**

```bash
git add src/index.css
git commit -m "feat: add dark mode base styles for body"
```

---

## Task 3: Create useTheme Hook

**Files:**
- Create: `src/hooks/useTheme.js`

**Step 1: Create hooks directory**

Run:
```bash
mkdir -p src/hooks
```

**Step 2: Create useTheme hook**

Create `src/hooks/useTheme.js`:
```js
import { useState, useEffect } from 'react';

export default function useTheme() {
  const [theme, setTheme] = useState(() => {
    // Check localStorage first
    if (typeof window !== 'undefined') {
      const saved = localStorage.getItem('theme');
      if (saved) return saved;

      // Fall back to system preference
      if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        return 'dark';
      }
    }
    return 'light';
  });

  useEffect(() => {
    const root = document.documentElement;

    if (theme === 'dark') {
      root.classList.add('dark');
    } else {
      root.classList.remove('dark');
    }

    localStorage.setItem('theme', theme);
  }, [theme]);

  const toggleTheme = () => {
    setTheme(prev => prev === 'light' ? 'dark' : 'light');
  };

  return { theme, toggleTheme };
}
```

**Step 3: Commit**

```bash
git add src/hooks/useTheme.js
git commit -m "feat: add useTheme hook with localStorage persistence"
```

---

## Task 4: Create ThemeToggle Component

**Files:**
- Create: `src/components/ui/ThemeToggle.jsx`

**Step 1: Create ThemeToggle component**

Create `src/components/ui/ThemeToggle.jsx`:
```jsx
import { motion } from 'framer-motion';
import useTheme from '../../hooks/useTheme';

export default function ThemeToggle({ className = '' }) {
  const { theme, toggleTheme } = useTheme();

  return (
    <motion.button
      onClick={toggleTheme}
      className={`
        text-xl text-secondary dark:text-white
        hover:text-primary dark:hover:text-primary
        transition-colors cursor-pointer
        ${className}
      `}
      whileTap={{ scale: 0.9 }}
      aria-label={`Switch to ${theme === 'light' ? 'dark' : 'light'} mode`}
    >
      <motion.i
        className={`bx ${theme === 'dark' ? 'bx-sun' : 'bx-moon'}`}
        key={theme}
        initial={{ rotate: -90, opacity: 0 }}
        animate={{ rotate: 0, opacity: 1 }}
        transition={{ duration: 0.3 }}
      />
    </motion.button>
  );
}
```

**Step 2: Commit**

```bash
git add src/components/ui/ThemeToggle.jsx
git commit -m "feat: add ThemeToggle component with animated icon"
```

---

## Task 5: Export ThemeToggle from UI Index

**Files:**
- Modify: `src/components/ui/index.js`

**Step 1: Add ThemeToggle export**

Replace `src/components/ui/index.js`:
```js
export { default as Button } from './Button';
export { default as SectionTitle } from './SectionTitle';
export { default as SocialLinks } from './SocialLinks';
export { default as SkillBar } from './SkillBar';
export { default as Typewriter } from './Typewriter';
export { default as Input } from './Input';
export { default as ThemeToggle } from './ThemeToggle';
```

**Step 2: Commit**

```bash
git add src/components/ui/index.js
git commit -m "feat: export ThemeToggle from UI index"
```

---

## Task 6: Add ThemeToggle to Header

**Files:**
- Modify: `src/components/layout/Header.jsx`

**Step 1: Update Header with ThemeToggle and dark mode classes**

Replace `src/components/layout/Header.jsx`:
```jsx
import { useState } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import { ThemeToggle } from '../ui';

const navLinks = [
  { name: 'Home', href: '#home' },
  { name: 'About', href: '#about' },
  { name: 'Skills', href: '#skills' },
  { name: 'Contact', href: '#contact' },
];

export default function Header() {
  const [isOpen, setIsOpen] = useState(false);
  const [activeLink, setActiveLink] = useState('#home');

  const handleNavClick = (href) => {
    setActiveLink(href);
    setIsOpen(false);
  };

  return (
    <header className="fixed top-0 left-0 w-full z-50 bg-white dark:bg-gray-900 shadow-[0_1px_4px_rgba(146,161,176,0.15)]">
      <nav className="h-12 md:h-16 flex justify-between items-center max-w-[1220px] mx-auto px-4 md:px-8 font-semibold">
        {/* Logo */}
        <a href="#" className="text-secondary dark:text-white text-lg">
          Abhigyan
        </a>

        {/* Desktop Navigation */}
        <div className="hidden md:flex items-center gap-12">
          <ul className="flex gap-12">
            {navLinks.map((link) => (
              <li key={link.href}>
                <a
                  href={link.href}
                  onClick={() => handleNavClick(link.href)}
                  className={`
                    relative text-secondary dark:text-white
                    hover:after:content-[''] hover:after:absolute
                    hover:after:w-full hover:after:h-[3px]
                    hover:after:bg-primary hover:after:left-0 hover:after:top-8
                    ${activeLink === link.href ?
                      "after:content-[''] after:absolute after:w-full after:h-[3px] after:bg-primary after:left-0 after:top-8"
                      : ''
                    }
                  `}
                >
                  {link.name}
                </a>
              </li>
            ))}
          </ul>
          <ThemeToggle />
        </div>

        {/* Mobile: Theme Toggle + Menu Toggle */}
        <div className="flex items-center gap-4 md:hidden">
          <ThemeToggle />
          <button
            className="text-secondary dark:text-white text-2xl cursor-pointer"
            onClick={() => setIsOpen(!isOpen)}
            aria-label="Toggle menu"
          >
            <i className={`bx ${isOpen ? 'bx-x' : 'bx-menu'}`}></i>
          </button>
        </div>

        {/* Mobile Navigation */}
        <AnimatePresence>
          {isOpen && (
            <motion.div
              className="fixed top-12 right-0 w-4/5 h-full bg-secondary p-8 md:hidden"
              initial={{ x: '100%' }}
              animate={{ x: 0 }}
              exit={{ x: '100%' }}
              transition={{ type: 'tween', duration: 0.3 }}
            >
              <ul className="flex flex-col gap-8">
                {navLinks.map((link) => (
                  <li key={link.href}>
                    <a
                      href={link.href}
                      onClick={() => handleNavClick(link.href)}
                      className={`
                        relative text-white
                        ${activeLink === link.href ?
                          "after:content-[''] after:absolute after:w-full after:h-[3px] after:bg-primary after:left-0 after:top-8"
                          : ''
                        }
                      `}
                    >
                      {link.name}
                    </a>
                  </li>
                ))}
              </ul>
            </motion.div>
          )}
        </AnimatePresence>
      </nav>
    </header>
  );
}
```

**Step 2: Verify toggle appears in header**

Run:
```bash
npm run dev
```
Open browser, verify:
- Toggle appears after nav links on desktop
- Toggle appears before hamburger on mobile
- Clicking toggle changes icon (sun/moon)

**Step 3: Commit**

```bash
git add src/components/layout/Header.jsx
git commit -m "feat: add ThemeToggle to Header with dark mode styles"
```

---

## Task 7: Update Input Component for Dark Mode

**Files:**
- Modify: `src/components/ui/Input.jsx`

**Step 1: Add dark mode classes**

Replace `src/components/ui/Input.jsx`:
```jsx
import { motion } from 'framer-motion';

export default function Input({
  label,
  name,
  type = 'text',
  as = 'input',
  className = ''
}) {
  const baseStyles = `
    w-full text-base font-semibold
    p-4 rounded-lg border-2 border-secondary
    outline-none mb-8
    focus:border-primary transition-colors
    bg-white dark:bg-gray-800
    dark:border-gray-600 dark:text-white
    dark:placeholder-gray-400
  `;

  const Component = as === 'textarea' ? 'textarea' : 'input';

  return (
    <motion.div
      initial={{ opacity: 0, y: 20 }}
      whileInView={{ opacity: 1, y: 0 }}
      viewport={{ once: true }}
      transition={{ duration: 0.5 }}
    >
      <Component
        name={name}
        type={as === 'input' ? type : undefined}
        placeholder={label}
        className={`${baseStyles} ${as === 'textarea' ? 'min-h-[150px] resize-y' : ''} ${className}`}
      />
    </motion.div>
  );
}
```

**Step 2: Commit**

```bash
git add src/components/ui/Input.jsx
git commit -m "feat: add dark mode styles to Input component"
```

---

## Task 8: Update SkillBar Component for Dark Mode

**Files:**
- Modify: `src/components/ui/SkillBar.jsx`

**Step 1: Add dark mode classes**

Replace `src/components/ui/SkillBar.jsx`:
```jsx
import { motion } from 'framer-motion';

export default function SkillBar({ name, icon, percentage }) {
  return (
    <motion.div
      className="
        relative flex justify-between items-center
        font-semibold p-2 px-4 mb-8
        rounded-lg shadow-[0_4px_25px_rgba(14,36,49,0.15)]
        bg-white dark:bg-gray-800
      "
      initial={{ opacity: 0, x: -50 }}
      whileInView={{ opacity: 1, x: 0 }}
      viewport={{ once: true }}
      transition={{ duration: 0.5 }}
    >
      <div className="flex items-center">
        <i className={`bx ${icon} text-3xl text-primary mr-4`}></i>
        <span className="dark:text-white">{name}</span>
      </div>
      <span className="dark:text-white">{percentage}%</span>

      {/* Progress bar */}
      <motion.div
        className="absolute left-0 bottom-0 h-1 bg-primary rounded-lg"
        initial={{ width: 0 }}
        whileInView={{ width: `${percentage}%` }}
        viewport={{ once: true }}
        transition={{ duration: 1, delay: 0.3 }}
      />
    </motion.div>
  );
}
```

**Step 2: Commit**

```bash
git add src/components/ui/SkillBar.jsx
git commit -m "feat: add dark mode styles to SkillBar component"
```

---

## Task 9: Update SocialLinks Component for Dark Mode

**Files:**
- Modify: `src/components/ui/SocialLinks.jsx`

**Step 1: Add dark mode classes**

Replace `src/components/ui/SocialLinks.jsx`:
```jsx
import { motion } from 'framer-motion';

const container = {
  hidden: {},
  show: {
    transition: {
      staggerChildren: 0.1,
    },
  },
};

const item = {
  hidden: { opacity: 0, y: 20 },
  show: { opacity: 1, y: 0 },
};

export default function SocialLinks({
  links,
  size = 'lg',
  direction = 'vertical',
  className = ''
}) {
  const sizeClasses = size === 'lg' ? 'text-2xl' : 'text-xl';
  const directionClasses = direction === 'vertical'
    ? 'flex-col space-y-4'
    : 'flex-row space-x-4';

  return (
    <motion.div
      className={`flex ${directionClasses} ${className}`}
      variants={container}
      initial="hidden"
      whileInView="show"
      viewport={{ once: true }}
    >
      {links.map((link) => (
        <motion.a
          key={link.label}
          href={link.url}
          target="_blank"
          rel="noopener noreferrer"
          className={`
            ${sizeClasses} text-secondary dark:text-white
            transition-colors duration-300
            hover:text-primary
          `}
          variants={item}
          whileHover={{ scale: 1.1 }}
          aria-label={link.label}
        >
          <i className={`bx ${link.icon}`}></i>
        </motion.a>
      ))}
    </motion.div>
  );
}
```

**Step 2: Commit**

```bash
git add src/components/ui/SocialLinks.jsx
git commit -m "feat: add dark mode styles to SocialLinks component"
```

---

## Task 10: Update Home Section for Dark Mode

**Files:**
- Modify: `src/components/sections/Home.jsx`

**Step 1: Add dark mode text classes**

Replace `src/components/sections/Home.jsx`:
```jsx
import { motion } from 'framer-motion';
import { Button, SocialLinks, Typewriter } from '../ui';
import HeroIllustration from '../svg/HeroIllustration';

const socialLinks = [
  { icon: 'bxl-linkedin', url: 'https://www.linkedin.com/in/abhigyan-pandey-b6948811a/', label: 'LinkedIn' },
  { icon: 'bxl-instagram', url: 'https://www.instagram.com/abhimaigyandega/', label: 'Instagram' },
  { icon: 'bxl-github', url: 'https://github.com/BemusedCat', label: 'GitHub' },
];

export default function Home() {
  return (
    <section
      id="home"
      className="min-h-[calc(100vh-3rem)] md:min-h-screen grid md:grid-cols-2 gap-4 items-center pt-12 md:pt-0 bd-container"
    >
      <div className="order-2 md:order-1">
        <motion.h1
          className="text-3xl md:text-6xl font-bold mb-10 dark:text-white"
          initial={{ opacity: 0, y: -50 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ duration: 0.8 }}
        >
          Hi,<br />
          I'm <span className="text-primary">Abhigyan</span><br />
          <Typewriter
            words={['Web Developer', 'Web Designer', 'Freelancer']}
            period={2000}
          />
        </motion.h1>

        <motion.div
          initial={{ opacity: 0, y: 20 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ duration: 0.8, delay: 0.2 }}
        >
          <Button href="#contact">Contact</Button>
        </motion.div>

        <div className="mt-8 md:mt-0 md:pt-8">
          <SocialLinks
            links={socialLinks}
            size="lg"
            direction="horizontal"
            className="md:flex-row"
          />
        </div>
      </div>

      <motion.div
        className="order-1 md:order-2 flex justify-center items-center"
        initial={{ opacity: 0, scale: 0.8 }}
        animate={{ opacity: 1, scale: 1 }}
        transition={{ duration: 0.8, delay: 0.4 }}
      >
        <HeroIllustration className="w-full max-w-md md:max-w-lg" />
      </motion.div>
    </section>
  );
}
```

**Step 2: Commit**

```bash
git add src/components/sections/Home.jsx
git commit -m "feat: add dark mode styles to Home section"
```

---

## Task 11: Update About Section for Dark Mode

**Files:**
- Modify: `src/components/sections/About.jsx`

**Step 1: Add dark mode text classes**

Replace `src/components/sections/About.jsx`:
```jsx
import { motion } from 'framer-motion';
import { SectionTitle } from '../ui';
import aboutImg from '../../assets/img/about.jpg';

export default function About() {
  return (
    <section id="about" className="section bd-container">
      <SectionTitle>About Me</SectionTitle>

      <div className="grid md:grid-cols-2 gap-8 items-center text-center md:text-left">
        <motion.div
          className="justify-self-center"
          initial={{ opacity: 0, x: -50 }}
          whileInView={{ opacity: 1, x: 0 }}
          viewport={{ once: true }}
          transition={{ duration: 0.6 }}
        >
          <img
            src={aboutImg}
            alt="About Abhigyan"
            className="w-48 md:w-72 rounded-lg"
          />
        </motion.div>

        <motion.div
          initial={{ opacity: 0, x: 50 }}
          whileInView={{ opacity: 1, x: 0 }}
          viewport={{ once: true }}
          transition={{ duration: 0.6, delay: 0.2 }}
        >
          <h3 className="text-lg font-semibold mb-4 dark:text-white">
            I'm Abhigyan
          </h3>
          <p className="leading-relaxed dark:text-gray-300">
            I am an aspiring software engineer, currently studying Electronics
            and Instrumentation Engineering at National Institute of Technology,
            Agartala. I'm passionate about web development, design, and creating
            meaningful digital experiences.
          </p>
        </motion.div>
      </div>
    </section>
  );
}
```

**Step 2: Commit**

```bash
git add src/components/sections/About.jsx
git commit -m "feat: add dark mode styles to About section"
```

---

## Task 12: Update Skills Section for Dark Mode

**Files:**
- Modify: `src/components/sections/Skills.jsx`

**Step 1: Add dark mode text classes**

Replace `src/components/sections/Skills.jsx`:
```jsx
import { motion } from 'framer-motion';
import { SectionTitle, SkillBar } from '../ui';
import ProgrammerIllustration from '../svg/ProgrammerIllustration';

const skills = [
  { name: 'HTML5', icon: 'bxl-html5', percentage: 95 },
  { name: 'CSS3', icon: 'bxl-css3', percentage: 85 },
  { name: 'JavaScript', icon: 'bxl-javascript', percentage: 65 },
  { name: 'Java', icon: 'bx-code-block', percentage: 65 },
  { name: 'C/C++', icon: 'bx-code-alt', percentage: 70 },
  { name: 'Machine Learning', icon: 'bx-line-chart', percentage: 50 },
];

export default function Skills() {
  return (
    <section id="skills" className="section bd-container">
      <SectionTitle>Skills</SectionTitle>

      <div className="grid md:grid-cols-2 gap-8 items-center">
        <motion.div
          initial={{ opacity: 0, y: 30 }}
          whileInView={{ opacity: 1, y: 0 }}
          viewport={{ once: true }}
          transition={{ duration: 0.6 }}
        >
          <h3 className="text-lg font-semibold mb-4 text-center md:text-left dark:text-white">
            Professional Skills
          </h3>
          <p className="mb-8 text-center md:text-left dark:text-gray-300">
            Technologies and tools I work with regularly.
          </p>

          {skills.map((skill) => (
            <SkillBar
              key={skill.name}
              name={skill.name}
              icon={skill.icon}
              percentage={skill.percentage}
            />
          ))}
        </motion.div>

        <motion.div
          className="hidden md:flex justify-center items-center pt-[15%]"
          initial={{ opacity: 0, scale: 0.8 }}
          whileInView={{ opacity: 1, scale: 1 }}
          viewport={{ once: true }}
          transition={{ duration: 0.6, delay: 0.3 }}
        >
          <ProgrammerIllustration className="w-full" />
        </motion.div>
      </div>
    </section>
  );
}
```

**Step 2: Commit**

```bash
git add src/components/sections/Skills.jsx
git commit -m "feat: add dark mode styles to Skills section"
```

---

## Task 13: Final Testing and Verification

**Step 1: Run dev server**

Run:
```bash
npm run dev
```

**Step 2: Verify dark mode functionality**

Test checklist:
- [ ] Toggle button visible in header (desktop: after nav, mobile: before hamburger)
- [ ] Click toggle switches between sun/moon icons
- [ ] Background changes: white â†” gray-900
- [ ] Header background changes with page
- [ ] Text colors change appropriately
- [ ] Skill bar cards have dark background
- [ ] Input fields have dark styling
- [ ] Social links change color
- [ ] Refresh page - theme persists
- [ ] Set system to dark mode, clear localStorage, refresh - should be dark

**Step 3: Build production**

Run:
```bash
npm run build
```
Expected: Build succeeds with no errors

**Step 4: Final commit**

```bash
git add -A
git commit -m "feat: complete dark mode implementation"
```

---

## Summary

Total: 13 tasks covering:
1. Tailwind dark mode configuration
2. Base CSS dark mode styles
3. useTheme hook with localStorage + system preference
4. ThemeToggle component with animated icon
5. Header integration
6. Component updates (Input, SkillBar, SocialLinks)
7. Section updates (Home, About, Skills)
8. Testing and verification

Each task is atomic and can be verified independently.
